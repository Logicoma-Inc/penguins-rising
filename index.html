<!DOCTYPE html>
<html manifest="static/Offline.appcache">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">	
    <title>Penguins Rising</title>
    <meta name="description" content="Penguins Rising - Zombie Survial Game" />
    <link rel="stylesheet" type="text/css" href="styles/index.css">
</head>
<body>
    <div id="dialog-modal">	
	<div id="loginDiv" style="position: fixed;left: 5px;z-index: 1;"><a href="javascript:login.showLoginDialog()"><img src="content/images/gplus_signin_normal.png"></a></div>
        <img src="content/images/SplashScreen.png" alt="Penguins Rising"/>
        <div id="welcome">
            <div class="startMenu buttons" id="message"></div>
        </div>
        <button id="playGame" class="action redbtn" onclick="welcome.startGame();"><span class="label" id="Gamer">Loading</span></button>
		<button class="action redbtn" onclick="welcome.showCredits('dialog-modal', 'credits');"><span class="label" id="Gamer">Credits</span></button>
    </div>
	<div id="credits">
		<h2>Developers</h2>					
		<p>Devroy Queen</p>
		<p>Andrew Peek</p>
		<p>Anthony Fassett</p>
		<p><i>Your Name Here</i></p>
		<p><a href="https://github.com/fassetar/Penguins-Rising/raw/master/.Concepts/Penguins%20Rising%202.exe" onclick="achManager.unlockAchievement('CgkInoXkzIgWEAIQDQ');">Orginal Game</a></p>
		<button class="action redbtn" onclick="welcome.showCredits('dialog-modal', 'credits');"><span class="label" id="Gamer">Back</span></button>
	</div>
    <div id="game">
        <div id="rightSide"></div>
            <canvas id="window">Sorry but Canvas is not Supported</canvas>
    </div>
    <div id="GameData">
        <audio id="gunshot">
            <source src="content/gunshot.wav" type="audio/wav">
            <source src="content/gunshot.mp3" type="audio/mpeg">
            Your browser does not support the audio format.
        </audio>
        <audio autoplay loop>
            <source src="content/ArcticWind.wav" type="audio/wav"> 
            <source src="content/ArcticWind.ogg" type="audio/ogg">          
            <source src="content/mp3/ArcticWind.mp3" type="audio/mpeg">
        </audio>
    </div>
    <footer id="footer">
        <div class="left">
            <div class="g-plus" data-action="share" data-annotation="bubble" onclick="achManager.unlockAchievement('CgkInoXkzIgWEAIQDw');" data-href="http://www.penguinsontherise.appspot.com"></div>
        </div>
        <div class="right">
            <a href="https://plus.google.com/115994908921270042556" rel="publisher" target="_blank">Google+</a>
            <a href="https://github.com/fassetar/Penguins-Rising" target="_blank">Updates</a>
        </div>
    </footer>
    <noscript>
        Well this is kinda weird... You don't have Javascript?
    </noscript>
    <script async src="https://apis.google.com/js/client:plusone.js?onload=apisLoaded"></script>
    <script async src="scripts/login.js"></script>
    <script async src="scripts/achievementManager.js"></script>
    <script async src="scripts/leaderboardManager.js"></script>
    <script src="scripts/snowstorm-min.js"></script>    
    <script>
        (function () {
            var signinCallback = function (auth) {
                login.handleAuthResult(auth)
            }
            //var apisLoaded = function () {
              //  login.init();
            //};
            snowStorm.flakesMaxActive = 96;
			snowStorm.followMouse = false;

            function AssetManager() {
                this.successCount = 0;
                this.errorCount = 0;
                this.downloadQueue = [];
                this.cache = {};
            }
            AssetManager.prototype.queueDownload = function (path) {
                this.downloadQueue.push(path);
            }
            AssetManager.prototype.downloadAll = function (downloadCallback) {
                if (this.downloadQueue.length === 0) {
                    downloadCallback();
                }
                for (var i = 0; i < this.downloadQueue.length; i++) {
                    var path = this.downloadQueue[i];
                    var img = new Image();
                    var that = this;
                    img.addEventListener("load", function () {
                        console.log(this.src + ' is loaded');
                        that.successCount += 1;
                        if (that.isDone()) {
                            downloadCallback();
                        }
                    }, false);
                    img.addEventListener("error", function () {
                        that.errorCount += 1;
                        if (that.isDone()) {
                            downloadCallback();
                        }
                    }, false);
                    img.src = path;
                    this.cache[path] = img;
                }
            }
            AssetManager.prototype.isDone = function () {
                return (this.downloadQueue.length == this.successCount + this.errorCount);
            }
            AssetManager.prototype.getAsset = function (path) {
                return this.cache[path];
            }
            var ASSET_MANAGER = new AssetManager();
            //ASSET_MANAGER.queueDownload('images/landscape.png');
            ASSET_MANAGER.downloadAll(function(){});
            if (ASSET_MANAGER.isDone)
            {
                document.getElementById("Gamer").innerHTML = "Play";
            }            
      })();
    </script>
    <script async src="scripts/game.js"></script>
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
            m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-41648493-1', 'penguinsontherise.appspot.com');
        ga('send', 'pageview');
</script>
</body>
</html>